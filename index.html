<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>학급 자리 배치표</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- 상단 고정 대제목 -->
  <header class="app-header">
    <h1 class="page-title">[상우고등학교] 학급 자리 배치표(랜덤 및 수동)] 제작 : 독서하는 경호t</h1>
  </header>

  <main class="layout">
    <!-- 좌: 1/3 (스크롤 가능, 2열 카드 레이아웃) -->
    <section class="panel left">
      <div class="left-grid">

        <!-- ① 입력 방식 (축소) -->
        <article id="cardInput" class="card card--input">
          <h2>① 입력 방식</h2>
          <div class="form-row">
            <label class="radio"><input type="radio" name="method" id="methodText" checked/> 텍스트 입력</label>
            <label class="radio"><input type="radio" name="method" id="methodFile"/> 파일 업로드(.txt/.csv)</label>
            <label class="radio"><input type="radio" name="method" id="methodNumber"/> 숫자 생성(학번만)</label>
          </div>

          <!-- 텍스트 입력 -->
          <div id="methodTextBox">
            <textarea id="namesInput" rows="4" placeholder="한 줄에 '학번 공백 이름' 형식 (또는 학번만)
예)
101 김가영
102 이다윤
103 박준호"></textarea>
          </div>

          <!-- 파일 업로드 -->
          <div id="methodFileBox" class="hidden">
            <input id="namesFile" type="file" accept=".txt,.csv,text/plain"/>
            <button id="readFileBtn" class="primary">파일 읽기</button>
            <small class="desc">줄 단위로 파싱합니다. (예: 101 김가영)</small>
          </div>

          <!-- 숫자 생성 -->
          <div id="methodNumberBox" class="hidden">
            <div class="form-row"><label>시작 번호</label><input id="numStart" type="number" value="1" min="0"/></div>
            <div class="form-row"><label>끝 번호</label><input id="numEnd" type="number" value="30" min="1"/></div>
            <div class="form-row"><label>자릿수(선택)</label><input id="numPad" type="number" value="0" min="0"/></div>
            <button id="genNumbersBtn">번호로 명단 생성</button>
            <small class="desc">이 방식은 학번만 생성합니다(이름 비워둠).</small>
          </div>

          <div class="buttons">
            <button id="applyNamesBtn" class="primary">명단 반영</button>
          </div>
        </article>

        <!-- ② 배치 옵션 (중간 사이즈, 비우기 버튼 이동) -->
        <article id="cardOptions" class="card card--pairL">
          <h2>② 배치 옵션</h2>
          <div class="form-row">
            <label>그리드</label>
            <select id="gridSizeSelect">
              <option value="6x6" selected>6 × 6 (36석)</option>
              <option value="5x6">5 × 6 (30석)</option>
            </select>
          </div>
          <div class="form-row">
            <label>보기 모드</label>
            <select id="viewModeSelect">
              <option value="top" selected>교탁 위</option>
              <option value="bottom">교탁 아래</option>
              <option value="both">양쪽 보기</option>
            </select>
          </div>
          <div class="form-row">
            <label>자동 배치</label>
            <select id="autoModeSelect">
              <option value="random" selected>랜덤</option>
              <option value="order">순서(기본=학번 오름차순)</option>
            </select>
          </div>
          <div class="form-row" id="orderBasisRow">
            <label>순서 기준</label>
            <select id="orderBasisSelect">
              <option value="id" selected>학번 오름차순</option>
              <option value="input">입력 순서</option>
              <option value="name">이름 오름차순</option>
            </select>
          </div>
          <div class="buttons">
            <button id="autoFillEmptyBtn">빈자리만 자동</button>
            <button id="autoFillAllBtn">전체 자동</button>
            <button id="clearAllBtn">모두 비우기(잠금 유지)</button>
          </div>
        </article>

        <!-- ③ 이름 잠금 (중간 사이즈) -->
        <article id="cardNameLock" class="card card--pairL">
          <h2>③ 이름 잠금(학번→좌석)</h2>
          <div class="form-row"><label>학번</label><input id="lockIdInput" type="text" placeholder="예: 101"/></div>
          <div class="form-row"><label>좌석번호</label><input id="lockSeatInput" type="number" min="1" step="1" placeholder="예: 1"/></div>
          <div class="buttons">
            <button id="addNameLockBtn">추가</button>
            <button id="removeNameLockBtn">해제</button>
          </div>
          <ul id="nameLockList" class="list small"></ul>
        </article>

        <!-- ④ 미배정 목록 (작게) -->
        <article id="cardUnassigned" class="card card--unassigned">
          <h2>④ 미배정 목록</h2>
          <ul id="unassignedList" class="list"></ul>
        </article>

        <!-- ⑤ 저장/불러오기 (작은 사이즈) -->
        <article id="cardStorage" class="card card--pairS">
          <h2>⑤ 저장/불러오기</h2>
          <div class="buttons">
            <button id="saveBtn">로컬 저장</button>
            <button id="loadBtn">로컬 불러오기</button>
            <button id="exportBtn">JSON 내보내기</button>
            <label class="import-label">JSON 가져오기
              <input id="importInput" type="file" accept="application/json" hidden/>
            </label>
          </div>
        </article>

        <!-- ⑥ 인쇄 (작은 사이즈) -->
        <article id="cardPrint" class="card card--pairS">
          <h2>⑥ 인쇄</h2>
          <label class="check">
            <input type="checkbox" id="printBothCheckbox"/>
            인쇄 시 두 버전(교탁 위+아래) 함께 출력
          </label>
          <div class="buttons">
            <button id="printBtn">인쇄</button>
          </div>
        </article>

      </div>
    </section>

    <!-- 우: 2/3 (좌석 보기) -->
    <section class="panel right">
      <!-- 제목 입력/표시를 좌석보기 위로 -->
      <div class="local-title-block">
        <label for="titleInput" class="sr-only">제목 입력</label>
        <input id="titleInput" type="text" placeholder="예: 2학년 1반 지구과학 자리배치 (2025-11-07)"/>
        <button id="applyTitleBtn" class="primary">제목 적용</button>
        <h2 id="titleDisplay" class="title-display">제목 없음</h2>
      </div>

      <div class="grid-header">
        <h2>좌석(보기)</h2>
        <div class="legend">
          <span class="badge empty">빈자리</span>
          <span class="badge filled">배정됨</span>
          <span class="badge disabled">비활성잠금</span>
          <span class="badge locked">점유잠금</span>
        </div>
      </div>

      <div id="views">
        <!-- 교탁 위 -->
        <div class="view-block" id="view-top" data-view="top">
          <h3 class="view-title">교탁: 위</h3>
          <div class="grid" id="grid-top" role="grid" aria-label="좌석(교탁 위)"></div>
        </div>
        <!-- 교탁 아래 -->
        <div class="view-block" id="view-bottom" data-view="bottom">
          <h3 class="view-title">교탁: 아래</h3>
          <div class="grid" id="grid-bottom" role="grid" aria-label="좌석(교탁 아래)"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- 우클릭 컨텍스트 메뉴 -->
  <menu id="ctxMenu" class="ctx-menu" type="context">
    <button data-act="toggleDisabled">비활성 잠금 토글</button>
    <button data-act="toggleOccupantLock">점유 잠금 토글</button>
    <button data-act="clearSeat">좌석 비우기</button>
  </menu>

  <footer class="app-footer">
    <small>Vanilla HTML/CSS/JS • GitHub Pages</small>
  </footer>

  <script src="script.js"></script>
</body>
</html>
